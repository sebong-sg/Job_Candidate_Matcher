{% extends "base.html" %}

{% block title %}Dashboard - AI Job Matcher Pro{% endblock %}

{% block page_title %}Dashboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/dashboard.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/cards.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard">
    <!-- Metrics Overview -->
    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-card__icon">
                <svg class="icon icon--jobs-metric" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                    <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                </svg>
            </div>
            <div class="metric-card__content">
                <div class="metric-card__value" id="jobs-count">0</div>
                <div class="metric-card__label">Open Jobs</div>
            </div>
        </div>
        
        <div class="metric-card">
            <div class="metric-card__icon">
                <svg class="icon icon--candidates-metric" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
            <div class="metric-card__content">
                <div class="metric-card__value" id="candidates-count">0</div>
                <div class="metric-card__label">Active Candidates</div>
            </div>
        </div>
        
        <div class="metric-card">
            <div class="metric-card__icon">
                <svg class="icon icon--matches-metric" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    <line x1="9" y1="10" x2="15" y2="10"></line>
                    <line x1="12" y1="7" x2="12" y2="13"></line>
                </svg>
            </div>
            <div class="metric-card__content">
                <div class="metric-card__value" id="matches-count">0</div>
                <div class="metric-card__label">Total Matches</div>
            </div>
        </div>
        
        <div class="metric-card">
            <div class="metric-card__icon">
                <svg class="icon icon--success-metric" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline>
                    <polyline points="16 7 22 7 22 13"></polyline>
                </svg>
            </div>
            <div class="metric-card__content">
                <div class="metric-card__value" id="success-rate">0%</div>
                <div class="metric-card__label">Success Rate</div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="action-section">
        <h2 class="section-title">Quick Actions</h2>
        <div class="action-buttons">
            <button class="btn btn--primary" onclick="runMatching()">
                <svg class="icon btn__icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                </svg>
                Run AI Matching
            </button>
            <button class="btn btn--secondary" onclick="loadCandidates()">
                <svg class="icon btn__icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                View Candidates
            </button>
            <button class="btn btn--secondary" onclick="loadJobs()">
                <svg class="icon btn__icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                    <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                </svg>
                View Jobs
            </button>
        </div>
    </div>

    <!-- Recent Matches -->
    <div class="matches-section">
        <div class="section-header">
            <h2 class="section-title">Recent Matches</h2>
            <button class="btn btn--outline" onclick="runMatching()">Refresh</button>
        </div>
        <div id="matches-results" class="matches-container">
            <div class="loading-state">
                <div class="loading-spinner"></div>
                <p>Loading match data...</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/modules/dashboard.js') }}"></script>
<script>
    // Initialize dashboard when page loads
    document.addEventListener('DOMContentLoaded', function() {
        dashboardModule.init();
    });
</script>
{% endblock %}
